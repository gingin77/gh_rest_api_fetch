<!DOCTYPE html>
 <html>
 	<head>
 		<meta charset="utf-8">
 		<meta http-equiv="X-UA-Compatible" content="IE=edge">
 		<title></title>
 		<meta name="description" content=" " />
 		<meta name="author" content=" " />
 		<meta name="HandheldFriendly" content="true" />
 		<meta name="MobileOptimized" content="320" />
 		<!-- Use maximum-scale and user-scalable at your own risk. It disables pinch/zoom. Think about usability/accessibility before including.-->
 		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
 		<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
 		<link rel="stylesheet" type="text/css" href=" ">
    <script src="https://d3js.org/d3-collection.v1.min.js"></script>
    <script src="https://d3js.org/d3-dispatch.v1.min.js"></script>
    <script src="https://d3js.org/d3-dsv.v1.min.js"></script>
    <script src="https://d3js.org/d3-request.v1.min.js"></script>
 	</head>
 	<body>
 		<h1>Hello, World!</h1>
    <div id="results_container">
    </div>
    <script>
      let resultsContainer = document.getElementById('results_container')

      d3.json('https://itunes.apple.com/search?term=beyonce', function(data) {
        console.log(data)
        let markup = ''
        let abrv = data.results

        for (let i = 0; i < data.results.length; i++) {
          let coverArt = abrv[i].artworkUrl100
          let artist = abrv[i].artistName
          let audio = abrv[i].previewUrl
          let songTitle = abrv[i].trackName

          let songResultHits = `
          <div class="item" url="${audio}" value='${artist}, "${songTitle}"'>
            <img src="${coverArt}" url="${audio}" value='${artist}, "${songTitle}"'/>
            <div class="song_info_holder">
              <h4 url="${audio}" value='${artist}, "${songTitle}"'>${songTitle}</h4>
              <br>
              <h3 url="${audio}" value='${artist}, "${songTitle}"'>${artist}</h3>
            </div>
          </div>`

          markup += songResultHits
        }
        resultsContainer.innerHTML = markup

        let itemDivs = document.getElementsByClassName('item')
        for (let j = 0; j < itemDivs.length; j++) {
          itemDivs[j].addEventListener('click', moveChosenSongToPlayer, true)
        }
      });
    </script>
 	</body>
 </html>
